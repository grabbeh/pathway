import { SectionTitle, Subtitle, Tagline, IntroTitle, BodyText, Text } from '../components/typography/index'
import { Header, Footer, FindOutMore, FullButton, MDXWrapper as Layout} from '../components/shared/index'
import { Box, Flex,StandardSection as Section } from '../components/general/index'
import Colors from '../design-system/Colors'
import FontSizes from '../design-system/FontSizes'
import FontWeights from '../design-system/FontWeights'
import Spacing from '../design-system/Spacing'
import Stats from '../components/what-we-do/ULCHStats'
import CaseStudyStamp from '../svg/CaseStudyStamp'
import KeyStatsStamp from '../svg/KeyStatsStamp'
import WhatWeDoFact from '../svg/WhatWeDoFact'
import Hero from '../components/about-us/Hero'
import Letter from '../components/home/Letter'
import Footnotes from '../components/home/Footnotes'
import Transform from '../design-system/transform'

export default Layout

# Pathway Design system

This page gives details on the core design elements that form the Pathway site. It runs through from the basic typography and colors, through to core components and visual prompts.

We define the values used for typography and everything else to style the site in a [theme](https://theme-ui.com/theme-spec). Defining values in one place can help to ensure consistency throughout the site.

## Typography

### Section Title 

Used as main header for a new section 

<SectionTitle>Section title</SectionTitle>

```jsx
<SectionTitle>Section title</SectionTitle>
```

### Intro Title

Used directly above `SectionTitle` to give some initial context

<IntroTitle text='Introduction' color='green'/>

```jsx
<IntroTitle text='Introduction' color='green'/>
```

### Tagline 

Taglines are used as a supplement to the main content to draw out an important point for example

<Tagline color='blue'>Tagline</Tagline>

```jsx
<Tagline color='blue'>Tagline</Tagline>
```

### Subtitle

Used as subtext, often immediately below a section title element or as a sub-heading to highlight the content below.

<Subtitle color='green'>Subtitle</Subtitle>

```jsx
<Subtitle>Subtitle</Subtitle>
```

### Body text 

<Text>Sample text</Text>

```jsx
<Text>Sample text</Text>
```

### Examples

This component makes use of `SectionTitle`, `Tagline`, `IntroTitle` and `Text`

<Box mb={-400}>
<Transform>
<Letter />
</Transform>
</Box>

## Font sizes 

A series of font sizes intended to provide a visual hierarchy

<FontSizes />

## Font weights 

<FontWeights />

### Example

The components above should provide enough variety to put together a text flow with sufficient hierachy. However you can always use the `<Text>` component to apply whatever attributes you want that are still within the above scales.

<Text fontSize={5} fontWeight='bold'>Example</Text>

```jsx
<Text fontSize={6} fontWeight='bold'>Example</Text>
```

## Spacing

Spacing (margins, padding) is based on a scale defined in our theme. You can use values:

- m (all margins)
- my (vertical margin)
- mx (horizontal margin)
- ml, mt, mr, mb (left, top, right and bottom margins)

Here's what it looks like to apply each of the spacing values in succession, as padding:

<Spacing />

## Colors

<Colors />

## Core components 

Core components are a collection of various smaller components put together to provide drop-in components that will usually form part of pages.

### Header

Simple header that compacts menu items into standard hamburger on narrow screens. Relies on `React.Context` - see Wrapper below for more details.

<Header toggleOpen={() => { console.log("Clicked")}} open={false} />

```jsx
<Header />
```

### Hero

The hero component is usually used as an introduction to a page and includes a photo on desktop, which is automatically removed on mobile

<Box mb={-250}>
<Transform>
<Hero  />
</Transform>
</Box>

```jsx
<Hero 
  bg='yellow'
  mobileBg='black'
  mobileColor='white'
  title={heroTitle}
  imageData={heroImage.fluid}
  mobileBackgroundImage={mobileHeroBackgroundImage.fluid}
  headerColor='white'
/>
```

### Find out more  

This will be used at the bottom of a page to give links to other key pages. The component automatically filters out the current page avoiding a link to the page the user is on.

<Box mb={-250}>
<Transform>
<FindOutMore bg='lightGrey'/>
</Transform>
</Box>

```jsx
<FindOutMore />
```

### Footnotes

Used to give additional references for content. It usually takes some markdown text.

<Box mb={-50}>
<Footnotes />
</Box>

```jsx
<Footnotes footnotes={footnotes}/>
```

### Footer

<Box mb={-180}>
<Transform>
<Footer />
</Transform>
</Box>


```jsx
<Footer />
```

### Button 

<Box width={200}>
  <FullButton to='/design-system' text='Click me'/>
</Box>

```jsx
<FullButton to='/design-system' text='Click me'/>
```

## Visual elements

A range of tools to highlight key facts

### Stats block

Used to bring attention to a set of key statistics relevant to Pathway. 

<Box mb={-150}>
<Transform>
<Stats />
</Transform>
</Box>

The below builds on the generic components `StatsSection />` to add specific content. This means that changes to the underlying generic component will be reflected in all cases where the component is used. 

Here's an example:

```jsx
const UCLHStats = () => {
  const data = useStaticQuery(query)
  const { ulchStatsTitle, ulchStats } = data.allContentfulWwdPage.edges[0].node
  return (
    <StatsSection
      bg='green'
      mdx={ulchStatsTitle.childMdx.body}
      stats={ulchStats}
    />
  )
}
```

### Fact bubbles

<WhatWeDoFact size={200} />

### Stamps

Stamps are used to draw attention to sections and to create visual continuity between pages

#### Key stats 

<KeyStatsStamp />

#### Case study 

<CaseStudyStamp />

## Generic components

The site uses a number of more generic components that are used as foundations for more complex components. These generic components are built using [Styled System](https://styled-system.com/) which provides an abstraction on top of CSS so rather than applying CSS styles, you can use values like `p` (padding) and `m` (margin).

### Box

The Box takes a range of different attributes to build up an interface, including spacing (`margin`, `padding`), layout (`width`) and colors (`bg`).

<Box width={100} height={100} bg='green' />

```jsx
<Box width={100} height={100} bg='green' />
```
### Flex

The flex component uses [Flexbox](https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Flexbox) to build layouts. Its main use is to create responsive layouts so for example giving a two column structure on larger screen sizes, but flattening to one column on smaller screens.

The below example means that on a larger screensize the two `Box` elements will sit side by side, and on a smaller screen, they'll shift to being one of top of the other.

<Flex flexWrap='wrap'>
<Box height={100} bg='blue' width={[1,1/2]} />
<Box height={100} bg='turquoise' width={[1,1/2]} />
</Flex>

```jsx
<Flex>
  <Box height={100} bg='yellow' width={[1, 1/2]} />
  <Box height={100} bg='green' width={1, 1/2]} />
</Flex>
```

### Section

The `Section` component is used as a starting point for a section of a site, giving a standard responsive width and padding.

<Section bg='lightGrey'/>

```jsx
<Section bg='lightGrey'/>
```

### Wrapper 

The `Wrapper` component is used to provide a range of attributes to a page. Any page in the page directory should be wrapped in this element.

```jsx
<Wrapper>
  {children}
</Wrapper>
```

## Gatsby, Contentful and Netlify

The site relies on a CMS called [Contentful](https://contentful.com) to host mainly the text content but also media like icons and images.

It's built on top of [Gatsby](https://gatsbyjs.org), a static site generator that in turn uses a JavaScript framework called [React](https://reactjs.org). React is one 
way to create re-usable blocks of code that you can see above.

The site is hosted on Netlify and automatically redeploys following any change in content on Contentful or GitHub where the code is stored.

## GraphQL

Gatsby makes requests to Contentful using [GraphQL](https://graphql.org). GraphQL means you only need to request the data you need for a section. Here's a sample query:

```graphql
const query = graphql`
  query {
    allContentfulAboutPage {
      edges {
        node {
          heroSubtitle {
            childMarkdownRemark {
              html
            }
          }
          heroTitle
          heroImage {
            fluid(maxWidth: 1200) {
              ...GatsbyContentfulFluid
            }
          }
          mobileHeroBackgroundImage {
            fluid(maxWidth: 400) {
              ...GatsbyContentfulFluid
            }
          }
        }
      }
    }
  }
`
```

This query is getting data to populate the Hero component on the about-us page, grabbing both image and text data.

## Markdown and MDX 

[Markdown](https://en.wikipedia.org/wiki/Markdown) and [MDX](https://mdxjs.com/) are an important part of the site. They both mean that non-coders can write content more easily. Both convert to HTML as part of building the site, so there's no need for a non-coder to have to deal with HTML tags (like `<div>` or `<ul>`).

As a general rule, the content in Contentful is simplified down to avoid giving non-coders a decision to make. In the first instance, use of simple text inputs is used (for example for titles and subtitles). After that Markdown is used where necessary. For example Markdown content will create paragraphs to give spacing to large text content. In other cases, fields which would otherwise be standard text fields, are Markdown text fields because we need to use certain Markdown features (for example adding in footnotes to title text).

MDX comes into it because it's a way of giving more controls to the appearance of Markdown elements. For example `<ul>` elements are styled to give a transparent circle element rather a bullet point. 

Here's an example. This markdown:

```md
# Title

Paragraph one

Paragraph two
```

translates to:

```html
<h1>Title</h1>
<p>Paragraph one</p>
<p>Paragraph two</p>
```

## Example

Putting it all together, here's an example section with corresponding code.

<Section bg='lightGrey'>
<IntroTitle text='Intro' color='green'/>
<SectionTitle>
Title
</SectionTitle>
<Subtitle color='blue'>
  Subtitle
</Subtitle>
<Text>Lorem ipsum dolor sit amet, te ius detracto tacimates, eos senserit reprehendunt eu, id eirmod facilis his. Ex animal probatus quaerendum vix, melius deseruisse appellantur no sit. Dico assueverit ei vis. Eos animal prodesset id. No intellegat voluptatum definitionem his, cu has euripidis aliquando, mei tantas viderer in. Singulis tractatos honestatis ne eum.</Text>
<Box mt={3} width={[1,300]}>
<FullButton to='/design-system' text='Design system'/>
</Box>
</Section>

```jsx
<Section bg='lightGrey'>
  <IntroTitle color='green' text='Intro'/>
  <SectionTitle>Title</SectionTitle>
  <Subtitle color='blue'>Subtitle</Subtitle>
  <Text>...sample text</Text>
  <Box width={[1,300]} mt={3}>
    <FullButton to='/design-system' text='Design system'/>
  </Box>
</Section>
```

